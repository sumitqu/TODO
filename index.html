<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple To‑Do App</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#06b6d4;--accent-2:#7c3aed;--success:#10b981}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:linear-gradient(180deg,#041025 0%, #071428 100%);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:960px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .sub{color:var(--muted);font-size:13px}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}

    .top{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .input{flex:1;display:flex;gap:8px}
    input[type=text], input[type=date], select{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:8px;color:inherit;outline:none}
    input[type=text]::placeholder{color:var(--muted)}
    button{background:var(--accent);border:none;color:#042029;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    .small{padding:8px 10px;font-size:13px;border-radius:8px}

    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .filters{display:flex;gap:6px}
    .chip{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:999px;color:var(--muted);cursor:pointer}
    .chip.active{border-color:rgba(255,255,255,0.12);color:#fff}

    .list{margin-top:10px}
    .task{display:flex;align-items:center;gap:10px;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);margin-bottom:8px}
    .task .left{display:flex;gap:10px;align-items:center;flex:1}
    .checkbox{width:18px;height:18px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;cursor:pointer}
    .checkbox.checked{background:linear-gradient(90deg,var(--accent-2),var(--accent));border:none}
    .title{font-weight:600}
    .meta{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:8px}
    .icon-btn{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:6px;border-radius:8px;color:var(--muted);cursor:pointer}
    .badge{padding:4px 8px;border-radius:8px;font-size:12px}
    .priority-low{background:rgba(16,185,129,0.12);color:var(--success)}
    .empty{padding:24px;text-align:center;color:var(--muted)}

    footer{display:flex;justify-content:space-between;margin-top:12px;color:var(--muted);font-size:13px}

    @media (max-width:600px){.top{flex-direction:column}.input{width:100%}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>To‑Do List</h1>
        <div class="sub">Simple, offline, single‑file app • data saved to <code>localStorage</code></div>
      </div>
      <div>
        <button id="exportBtn" class="small">Export</button>
        <button id="importBtn" class="small">Import</button>
        <input type="file" id="importFile" style="display:none" accept="application/json" />
      </div>
    </header>

    <div class="card">
      <div class="top">
        <div class="input">
          <input id="taskInput" type="text" placeholder="Add a new task and press Enter or click Add" />
          <select id="priority">
            <option value="normal">Normal</option>
            <option value="low">Low</option>
            <option value="high">High</option>
          </select>
          <input id="due" type="date" />
        </div>
        <button id="addBtn">Add</button>
      </div>

      <div class="controls">
        <div class="filters">
          <div class="chip active" data-filter="all">All</div>
          <div class="chip" data-filter="active">Active</div>
          <div class="chip" data-filter="completed">Completed</div>
          <div class="chip" data-filter="today">Due Today</div>
        </div>

        <div style="margin-left:auto;display:flex;gap:8px">
          <input id="search" type="text" placeholder="Search..." />
          <button id="clearCompleted" class="small">Clear Completed</button>
        </div>
      </div>

      <div class="list" id="taskList"></div>

      <div id="emptyMsg" class="empty" style="display:none">No tasks yet — add your first task ✨</div>

      <footer>
        <div id="counts">0 tasks</div>
        <div>
          <button id="clearAll" class="small">Clear All</button>
        </div>
      </footer>
    </div>
  </div>

  <script>
    // Simple single-file todo app using localStorage
    (function(){
      const LS_KEY = 'simple_todo_v1';
      const taskInput = document.getElementById('taskInput');
      const addBtn = document.getElementById('addBtn');
      const taskList = document.getElementById('taskList');
      const counts = document.getElementById('counts');
      const clearAll = document.getElementById('clearAll');
      const clearCompleted = document.getElementById('clearCompleted');
      const search = document.getElementById('search');
      const chips = document.querySelectorAll('.chip');
      const priority = document.getElementById('priority');
      const due = document.getElementById('due');
      const exportBtn = document.getElementById('exportBtn');
      const importBtn = document.getElementById('importBtn');
      const importFile = document.getElementById('importFile');

      let filter = 'all';
      let tasks = load();

      function save(){
        localStorage.setItem(LS_KEY, JSON.stringify(tasks));
      }
      function load(){
        try{const raw = localStorage.getItem(LS_KEY); return raw?JSON.parse(raw):[];}catch(e){return []}
      }

      function uid(){return Date.now().toString(36)+Math.random().toString(36).slice(2,7)}

      function render(){
        taskList.innerHTML='';
        const q = search.value.trim().toLowerCase();
        const today = new Date().toISOString().slice(0,10);
        const visible = tasks.filter(t=>{
          if(filter==='active' && t.done) return false;
          if(filter==='completed' && !t.done) return false;
          if(filter==='today' && t.due!==today) return false;
          if(q && !(t.text.toLowerCase().includes(q)|| (t.note||'').toLowerCase().includes(q))) return false;
          return true;
        });

        if(visible.length===0){document.getElementById('emptyMsg').style.display='block';} else {document.getElementById('emptyMsg').style.display='none';}

        visible.forEach(t=>{
          const el = document.createElement('div'); el.className='task';
          const left = document.createElement('div'); left.className='left';

          const cb = document.createElement('div'); cb.className='checkbox'+(t.done?' checked':''); cb.title='Toggle completed';
          cb.addEventListener('click',()=>{t.done=!t.done; save(); render();});

          const textWrap = document.createElement('div');
          const title = document.createElement('div'); title.className='title'; title.textContent = t.text;
          if(t.done) title.style.textDecoration='line-through';

          const meta = document.createElement('div'); meta.className='meta';
          const parts=[]; if(t.due) parts.push('Due: '+t.due); parts.push('Priority: '+t.priority); meta.textContent = parts.join(' • ');

          textWrap.appendChild(title); textWrap.appendChild(meta);
          left.appendChild(cb); left.appendChild(textWrap);

          const actions = document.createElement('div'); actions.className='actions';

          const edit = document.createElement('button'); edit.className='icon-btn'; edit.textContent='Edit';
          edit.addEventListener('click',()=>{ openEdit(t); });

          const del = document.createElement('button'); del.className='icon-btn'; del.textContent='Delete';
          del.addEventListener('click',()=>{ tasks = tasks.filter(x=>x.id!==t.id); save(); render(); });

          actions.appendChild(edit); actions.appendChild(del);

          if(t.priority==='low'){const b=document.createElement('span');b.className='badge priority-low';b.textContent='Low'; actions.appendChild(b);} 
          if(t.priority==='high'){const b=document.createElement('span');b.className='badge';b.textContent='High'; b.style.background='rgba(124,58,237,0.12)'; b.style.color='var(--accent-2)'; actions.appendChild(b);} 

          el.appendChild(left); el.appendChild(actions);
          taskList.appendChild(el);
        });

        counts.textContent = tasks.length + ' task' + (tasks.length===1?'':'s');
      }

      function addTask(text, opts={}){
        if(!text || !text.trim()) return;
        tasks.unshift({id:uid(), text:text.trim(), done:false, priority:opts.priority||'normal', due:opts.due||'', note:opts.note||''});
        save(); render();
      }

      addBtn.addEventListener('click', ()=>{ addTask(taskInput.value, {priority:priority.value, due:due.value}); taskInput.value=''; due.value=''; priority.value='normal'; taskInput.focus(); });
      taskInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ addBtn.click(); } });

      chips.forEach(c=>c.addEventListener('click', ()=>{ chips.forEach(x=>x.classList.remove('active')); c.classList.add('active'); filter=c.dataset.filter; render(); }));
      clearAll.addEventListener('click', ()=>{ if(confirm('Clear all tasks?')){ tasks=[]; save(); render(); } });
      clearCompleted.addEventListener('click', ()=>{ tasks = tasks.filter(t=>!t.done); save(); render(); });
      search.addEventListener('input', ()=>render());

      function openEdit(task){
        const newText = prompt('Edit task text', task.text);
        if(newText===null) return; task.text = newText.trim();
        const newDue = prompt('Edit due date (YYYY-MM-DD) or empty', task.due||''); if(newDue!==null) task.due = newDue.trim();
        const newPr = prompt('Priority (low, normal, high)', task.priority); if(newPr!==null) task.priority=newPr.trim();
        save(); render();
      }

      // export / import
      exportBtn.addEventListener('click', ()=>{
        const blob = new Blob([JSON.stringify(tasks, null, 2)], {type:'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'todo-export.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      });

      importBtn.addEventListener('click', ()=>importFile.click());
      importFile.addEventListener('change', ()=>{
        const f = importFile.files[0]; if(!f) return; const reader = new FileReader();
        reader.onload = ()=>{ try{ const data = JSON.parse(reader.result); if(Array.isArray(data)){ tasks = data; save(); render(); alert('Imported '+data.length+' tasks'); } else alert('Invalid file'); }catch(e){alert('Could not parse file');} importFile.value=''; };
        reader.readAsText(f);
      });

      // initial render
      render();

    })();
  </script>
</body>
</html>
